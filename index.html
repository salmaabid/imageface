<!DOCTYPE html> 
<html lang="en">
<head>
    <title>HTML5 Camera</title> 
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, user-scalable=yes">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <script >   const  YOUR_KEY='ce772ce63e2147c7959e1535c2b6d66b';
      
     
  
      function sendToMS(callback){
  canvas.toBlob(function(blob){
    var xhr = new XMLHttpRequest();
    xhr.onload = e=>callback(xhr.response);
    console.log(xhr);
    xhr.open('POST', 'https://westcentralus.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceId=true&returnFaceLandmarks=true&returnFaceAttributes=age,gender,headPose,smile,facialHair,glasses,emotion,hair,makeup,occlusion,accessories,blur,exposure,noise');
    xhr.setRequestHeader("Content-Type", "application/octet-stream");
    xhr.setRequestHeader("Ocp-Apim-Subscription-Key", YOUR_KEY);
   
xhr.send(blob);
  }, 'image/jpeg', .8);}
 
  function photo(){

  navigator.mediaDevices.getUserMedia({
    video: true
  }).then(s => {
    vid.srcObject = s;
    return vid.play();
  })

  }

      
      
  
  function tttt(){
    canvas.width = vid.videoWidth;
    canvas.height = vid.videoHeight;
    canvas.getContext('2d').drawImage(vid, 0, 0);
   
  }

</script>
<script>
// $(document).ready(function() { 
  //  $('#tt').click(function() {
        $.ajax({
            url: 'document.json',
            dataType: 'json',
            type:'get',
            cache:false,
            success: function(data) {
               
                 //   $('#div2').append(json['image']['title'] );
                console.log(data);
            }
        });    
        
  

</script>

</head>
<body>
<h1> Image description</h1>
<button onclick="photo()">vid√©o</button>
<button onclick="tttt()">prendrephoto</button>
<button id="tt">EMOTIONS</button> 
<button onclick=" sendToMS(text => log.textContent=text);">description</button>
    <video id="vid"></video>
   
    <canvas id="canvas"></canvas>
    <textarea  rows="30" cols="50" id="log"></textarea>
    <div id=div2>  </div>
</body>
</html>
 
